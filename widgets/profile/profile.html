<div class="bon_profile_wrap container" data-ng-show="widget.enabled" data-ng-cloak>

  <magic-modal class="bns_overlay bns_overlay_prof" data-ng-cloak data-show="profile.show_fill_profile">
        <div class="bns_overlay_inner" data-sailplay-fill-profile data-config="widget.fill_profile.config">
            <h4 class="bns_head" data-ng-hide="formState != 'default'">
                Ваш профиль
            </h4>
            <h4 class="bns_head" data-ng-hide="formState != 'phone'">
                Подтверждение
            </h4>
            <a href="" class="close" data-ng-click="$parent.close()"></a>
            <form data-ng-hide="formState != 'default'" name="fill_profile_form" class="bns_form" data-ng-submit="sailplay.fill_profile.submit(fill_profile_form, profile.fill_profile);">

            <div class="" data-ng-repeat="field in sailplay.fill_profile.form.fields" data-ng-switch="field.input">

              <div data-ng-switch-when="image" class="avatar_upload clearfix">
                <img width="160px" data-ng-src="{{ (field.value | sailplay_pic) || 'http://saike.ru/sailplay-magic/dist/img/profile/avatar_default.png'}}" alt="">
              </div>

              <div data-ng-switch-when="text" class="bns_input_block">
                <label>{{ field.label }}</label>
                <input name="{{field.name}}" type="text" placeholder="{{ field.placeholder }}" data-ng-model="field.value">
              </div>

              <div data-ng-switch-when="date" class="bns_select_date bns_zi3">
                <label>{{ field.label }}</label>
                <date-picker data-model="field.value"></date-picker>
              </div>

              <div data-ng-switch-when="select" class="clearfix">
                <label class="form_label">{{ field.label }}</label>
                <div class="magic_select form_input">
                  <select name="{{field.name}}" data-ng-model="field.value" data-ng-options="item.value as item.text for item in field.data"></select>
                </div>
              </div>
<!--
                <div class="bns_radio_block bns_zi2">
                    <label>Пол</label>
                    <div class="bns_radio">
                        <div class="bns_radio_item">
                            <input type="radio" name="pol" id="man">
                            <label for="man">Мужской</label>
                        </div>
                        <div class="bns_radio_item">
                            <input type="radio" name="pol" id="fam">
                            <label for="fam">Женский</label>
                        </div>
                    </div>
                </div>
-->
              <div data-ng-switch-when="radio" class="bns_radio_block bns_zi2">
                <label>{{ field.label }}</label>
                <div class="bns_radio">
                  <div class="bns_radio_item" data-ng-repeat="item in field.data">
                      <input name="{{field.name}}" data-ng-value="{{item.value}}" data-ng-model="field.value" id="{{'field_' + field.name + '_' + item.value}}" type="radio">
                      <label for="{{'field_' + field.name + '_' + item.value}}">{{ item.text }}</label>
                  </div>
                </div>
              </div>

              <div data-ng-switch-when="radio-tag" class="bns_radio_block bns_zi2">
                <label>{{ field.label }}</label>
                <div class="bns_radio">
                  <div class="bns_radio_item" data-ng-repeat="item in field.data">
            <!--      {{item}} -->
                      <input value="{{item.tag}}" name="{{field.name}}" data-ng-model="field.value" id="{{'field_' + field.name + '_' + item.tag}}" type="radio">
                      <label for="{{'field_' + field.name + '_' + item.tag}}">{{ item.text }}</label>
                  </div>
                </div>
              </div>

              <div data-ng-switch-when="phone" class="bns_input_block" data-ng-class="{error: $parent.$parent.phone_error || fill_profile_form[field.name].$invalid}">
                <label>{{ field.label }}</label>
                <input type="text" name="{{field.name}}" data-ui-options="{
                  maskDefinitions: phoneMask,
                  clearOnBlur: false}" 
                  data-ui-mask="{{ field.placeholder }}" data-ng-model="field.value" data-ng-required="true">
                
              </div>
              <div data-ng-switch-when="email" class="bns_input_block" data-ng-class="{error: ($parent.$parent.email_error || fill_profile_form[field.name].$invalid)}">
                <label>{{ field.label }}</label>
                <input name="{{field.name}}" data-ng-required="true" type="email" placeholder="{{ field.placeholder }}" data-ng-model="field.value">
              </div>
            
              <div data-ng-switch="field.input">
                <div data-ng-switch-when="phone" data-ng-show="$parent.$parent.phone_error" data-ng-switch="$parent.$parent.phone_send_error" class="bns_error_block">
                  <span data-ng-switch-when="alreadyInUse">{{widget.texts.phone_confirm_errors.phone_already_in_use}}</span>
                  <span data-ng-switch-when="resendLimit">{{widget.texts.phone_confirm_errors.phone_resend_limit}}</span>
                </div>
                <div data-ng-switch-when="email" data-ng-show="$parent.$parent.email_error" class="bns_error_block">
                  {{widget.texts.email_error}}
                </div>
              </div>
            </div>
            
            <div class="bns_form_bottom bns_form_bottom_mt answ_text">
              <button type="submit" class="bns_btn" id="profileFormSubmit">
                {{ 'buttons.texts.save' | tools }}
              </button>
            </div>

          </form>
          <form class="phone_confirm_form bns_form" name="phone_confirm" data-ng-hide="formState != 'phone'">
            <div class="confirm_caption" data-ng-bind="widget.texts.phone_confirm + ' ' + (fill_profile_form.addPhone.$viewValue)"></div>
            <div class="confirm_field">
              <label>Код подтверждения</label>
              <input type="text" name="phone_code" data-ng-model="phone_code" data-ng-pattern="/^\d{4}$/" data-ng-required="true" data-ng-bind>
            </div>
            <div data-ng-show="phone_error2" class="bns_error_block" data-ng-switch="phone_confirm_error">
              <span data-ng-switch-when="failedAttempt">
                {{widget.texts.phone_code_error_p1 + attemptsLeft + widget.texts.phone_code_error_p2}}
              </span>
              <span data-ng-switch-when="attemptsExpired">
                {{widget.texts.phone_confirm_errors.phone_code_error_limit}}
              </span>
              <span data-ng-switch-when="timeExpired">
                {{widget.texts.phone_confirm_errors.phone_countdown_end}}
              </span>
              <span data-ng-switch-when="resendLimit">
                {{widget.texts.phone_confirm_errors.phone_resend_limit}}
              </span>
            </div>
            <div class="bns_confirm_block" data-ng-hide="$parent.$parent.timerVal<1">
              {{widget.texts.phone_code_time_remaining + ' ' + $parent.$parent.timerVal + ' ' + 'сек.'}}
            </div>
            <div class="bns_resend_block" data-ng-click="sailplay.fill_profile.updatePhone(fill_profile_form.addPhone.$viewValue)">
              {{widget.texts.phone_resend_btn}}
            </div>
            <div>
              <div></div>
            </div>
            <div class="bns_form_bottom bns_form_bottom_mt answ_text">
              <button class="bns_btn" data-ng-click="$parent.$parent.formState = 'default'">
                {{ 'buttons.texts.back' | tools }}
              </button>
              <button type="submit" class="bns_btn" data-ng-click="sailplay.fill_profile.checkSmsCode(phone_code)" data-ng-class="{disabled: phone_comfirm.phone_code.$invalid}" >
                {{ 'buttons.texts.save' | tools }}
              </button>
            </div>
          </form>
        </div>
  </magic-modal>
</div>

  <!--profile edit section
  <magic-modal class="fill_profile_modal" data-show="profile.show_fill_profile">

    <div class="mb_popup mb_popup_prof" data-sailplay-fill-profile data-config="widget.fill_profile.config">

      <div class="mb_popup_top">
        <span class="modal_profile_header">{{ widget.fill_profile.header }}</span>
      </div>

      <form name="fill_profile_form" class="mb_popup_main mb_popup_main_mt" data-ng-submit="sailplay.fill_profile.submit(fill_profile_form, profile.fill_profile);">

        <div class="form_field" data-ng-repeat="field in sailplay.fill_profile.form.fields" data-ng-switch="field.input">

          <div data-ng-switch-when="image" class="avatar_upload clearfix">
            <img width="160px" data-ng-src="{{ (field.value | sailplay_pic) || 'http://saike.ru/sailplay-magic/dist/img/profile/avatar_default.png'}}" alt="">
          </div>

          <div data-ng-switch-when="text" class="clearfix">
            <label class="form_label">{{ field.label }}</label>
            <input class="form_input" type="text" placeholder="{{ field.placeholder }}" data-ng-model="field.value">
          </div>

          <div data-ng-switch-when="date" class="clearfix">
            <label class="form_label">{{ field.label }}</label>
            <date-picker data-model="field.value"></date-picker>
          </div>

          <div data-ng-switch-when="select" class="clearfix">
            <label class="form_label">{{ field.label }}</label>
            <div class="magic_select form_input">
              <select data-ng-model="field.value" data-ng-options="item.value as item.text for item in field.data"></select>
            </div>
          </div>

          <div data-ng-switch-when="phone" class="clearfix">
            <label class="form_label">{{ field.label }}</label>
            <input class="form_input" type="text" data-model-view-value="true" data-ui-mask="{{ field.placeholder }}" data-ng-model="field.value">
          </div>

          <div data-ng-switch-when="email" class="clearfix">
            <label class="form_label">{{ field.label }}</label>
            <input class="form_input" type="email" placeholder="{{ field.placeholder }}" data-ng-model="field.value">
          </div>

        </div>

        <div class="answ_text">
          <button type="submit" class="sp_btn button_primary">{{ 'buttons.texts.save' | tools }}</button>
        </div>
      </form>
    </div>
  </magic-modal>
  -->

</div>